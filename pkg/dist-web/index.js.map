{"version":3,"file":"index.js","sources":["../dist-src/iron-request.js","../dist-src/iron-ajax.js"],"sourcesContent":["/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport { Polymer } from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport { Base } from '@polymer/polymer/polymer-legacy.js';\n/*\niron-request can be used to perform XMLHttpRequests.\n\n    <iron-request id=\"xhr\"></iron-request>\n    ...\n    this.$.xhr.send({url: url, body: params});\n*/\n\nPolymer({\n  is: 'iron-request',\n\n  /** @override */\n  _template: null,\n  hostAttributes: {\n    hidden: true\n  },\n  properties: {\n    /**\n     * A reference to the XMLHttpRequest instance used to generate the\n     * network request.\n     *\n     * @type {XMLHttpRequest}\n     */\n    xhr: {\n      type: Object,\n      notify: true,\n      readOnly: true,\n      value: function () {\n        return new XMLHttpRequest();\n      }\n    },\n\n    /**\n     * A reference to the parsed response body, if the `xhr` has completely\n     * resolved.\n     *\n     * @type {*}\n     * @default null\n     */\n    response: {\n      type: Object,\n      notify: true,\n      readOnly: true,\n      value: function () {\n        return null;\n      }\n    },\n\n    /**\n     * A reference to the status code, if the `xhr` has completely resolved.\n     */\n    status: {\n      type: Number,\n      notify: true,\n      readOnly: true,\n      value: 0\n    },\n\n    /**\n     * A reference to the status text, if the `xhr` has completely resolved.\n     */\n    statusText: {\n      type: String,\n      notify: true,\n      readOnly: true,\n      value: ''\n    },\n\n    /**\n     * A promise that resolves when the `xhr` response comes back, or rejects\n     * if there is an error before the `xhr` completes.\n     * The resolve callback is called with the original request as an argument.\n     * By default, the reject callback is called with an `Error` as an argument.\n     * If `rejectWithRequest` is true, the reject callback is called with an\n     * object with two keys: `request`, the original request, and `error`, the\n     * error object.\n     *\n     * @type {Promise}\n     */\n    completes: {\n      type: Object,\n      readOnly: true,\n      notify: true,\n      value: function () {\n        return new Promise(function (resolve, reject) {\n          this.resolveCompletes = resolve;\n          this.rejectCompletes = reject;\n        }.bind(this));\n      }\n    },\n\n    /**\n     * An object that contains progress information emitted by the XHR if\n     * available.\n     *\n     * @default {}\n     */\n    progress: {\n      type: Object,\n      notify: true,\n      readOnly: true,\n      value: function () {\n        return {};\n      }\n    },\n\n    /**\n     * Aborted will be true if an abort of the request is attempted.\n     */\n    aborted: {\n      type: Boolean,\n      notify: true,\n      readOnly: true,\n      value: false\n    },\n\n    /**\n     * Errored will be true if the browser fired an error event from the\n     * XHR object (mainly network errors).\n     */\n    errored: {\n      type: Boolean,\n      notify: true,\n      readOnly: true,\n      value: false\n    },\n\n    /**\n     * TimedOut will be true if the XHR threw a timeout event.\n     */\n    timedOut: {\n      type: Boolean,\n      notify: true,\n      readOnly: true,\n      value: false\n    }\n  },\n\n  /**\n   * Succeeded is true if the request succeeded. The request succeeded if it\n   * loaded without error, wasn't aborted, and the status code is ≥ 200, and\n   * < 300, or if the status code is 0.\n   *\n   * The status code 0 is accepted as a success because some schemes - e.g.\n   * file:// - don't provide status codes.\n   *\n   * @return {boolean}\n   */\n  get succeeded() {\n    if (this.errored || this.aborted || this.timedOut) {\n      return false;\n    }\n\n    var status = this.xhr.status || 0; // Note: if we are using the file:// protocol, the status code will be 0\n    // for all outcomes (successful or otherwise).\n\n    return status === 0 || status >= 200 && status < 300;\n  },\n\n  /**\n   * Sends an HTTP request to the server and returns a promise (see the\n   * `completes` property for details).\n   *\n   * The handling of the `body` parameter will vary based on the Content-Type\n   * header. See the docs for iron-ajax's `body` property for details.\n   *\n   * @param {{\n   *   url: string,\n   *   method: (string|undefined),\n   *   async: (boolean|undefined),\n   *   body:\n   * (ArrayBuffer|ArrayBufferView|Blob|Document|FormData|null|string|undefined|Object),\n   *   headers: (Object|undefined),\n   *   handleAs: (string|undefined),\n   *   jsonPrefix: (string|undefined),\n   *   withCredentials: (boolean|undefined),\n   *   timeout: (number|undefined),\n   *   rejectWithRequest: (boolean|undefined)}} options -\n   *   - url The url to which the request is sent.\n   *   - method The HTTP method to use, default is GET.\n   *   - async By default, all requests are sent asynchronously. To send\n   * synchronous requests, set to false.\n   *   -  body The content for the request body for POST method.\n   *   -  headers HTTP request headers.\n   *   -  handleAs The response type. Default is 'text'.\n   *   -  withCredentials Whether or not to send credentials on the request.\n   * Default is false.\n   *   -  timeout - Timeout for request, in milliseconds.\n   *   -  rejectWithRequest Set to true to include the request object with\n   * promise rejections.\n   * @return {Promise}\n   */\n  send: function (options) {\n    var xhr = this.xhr;\n\n    if (xhr.readyState > 0) {\n      return null;\n    }\n\n    xhr.addEventListener('progress', function (progress) {\n      this._setProgress({\n        lengthComputable: progress.lengthComputable,\n        loaded: progress.loaded,\n        total: progress.total\n      }); // Webcomponents v1 spec does not fire *-changed events when not connected\n\n\n      this.fire('iron-request-progress-changed', {\n        value: this.progress\n      });\n    }.bind(this));\n    xhr.addEventListener('error', function (error) {\n      this._setErrored(true);\n\n      this._updateStatus();\n\n      var response = options.rejectWithRequest ? {\n        error: error,\n        request: this\n      } : error;\n      this.rejectCompletes(response);\n    }.bind(this));\n    xhr.addEventListener('timeout', function (error) {\n      this._setTimedOut(true);\n\n      this._updateStatus();\n\n      var response = options.rejectWithRequest ? {\n        error: error,\n        request: this\n      } : error;\n      this.rejectCompletes(response);\n    }.bind(this));\n    xhr.addEventListener('abort', function () {\n      this._setAborted(true);\n\n      this._updateStatus();\n\n      var error = new Error('Request aborted.');\n      var response = options.rejectWithRequest ? {\n        error: error,\n        request: this\n      } : error;\n      this.rejectCompletes(response);\n    }.bind(this)); // Called after all of the above.\n\n    xhr.addEventListener('loadend', function () {\n      this._updateStatus();\n\n      this._setResponse(this.parseResponse());\n\n      if (!this.succeeded) {\n        var error = new Error('The request failed with status code: ' + this.xhr.status);\n        var response = options.rejectWithRequest ? {\n          error: error,\n          request: this\n        } : error;\n        this.rejectCompletes(response);\n        return;\n      }\n\n      this.resolveCompletes(this);\n    }.bind(this));\n    this.url = options.url;\n    var isXHRAsync = options.async !== false;\n    xhr.open(options.method || 'GET', options.url, isXHRAsync);\n    var acceptType = {\n      'json': 'application/json',\n      'text': 'text/plain',\n      'html': 'text/html',\n      'xml': 'application/xml',\n      'arraybuffer': 'application/octet-stream'\n    }[options.handleAs];\n    var headers = options.headers || Object.create(null);\n    var newHeaders = Object.create(null);\n\n    for (var key in headers) {\n      newHeaders[key.toLowerCase()] = headers[key];\n    }\n\n    headers = newHeaders;\n\n    if (acceptType && !headers['accept']) {\n      headers['accept'] = acceptType;\n    }\n\n    Object.keys(headers).forEach(function (requestHeader) {\n      if (/[A-Z]/.test(requestHeader)) {\n        Base._error('Headers must be lower case, got', requestHeader);\n      }\n\n      xhr.setRequestHeader(requestHeader, headers[requestHeader]);\n    }, this);\n\n    if (isXHRAsync) {\n      xhr.timeout = options.timeout || 0;\n      var handleAs = options.handleAs; // If a JSON prefix is present, the responseType must be 'text' or the\n      // browser won’t be able to parse the response.\n\n      if (!!options.jsonPrefix || !handleAs) {\n        handleAs = 'text';\n      } // In IE, `xhr.responseType` is an empty string when the response\n      // returns. Hence, caching it as `xhr._responseType`.\n\n\n      xhr.responseType = xhr._responseType = handleAs; // Cache the JSON prefix, if it exists.\n\n      if (!!options.jsonPrefix) {\n        xhr._jsonPrefix = options.jsonPrefix;\n      }\n    }\n\n    xhr.withCredentials = !!options.withCredentials;\n\n    var body = this._encodeBodyObject(options.body, headers['content-type']);\n\n    xhr.send(\n    /**\n       @type {ArrayBuffer|ArrayBufferView|Blob|Document|FormData|\n               null|string|undefined}\n     */\n    body);\n    return this.completes;\n  },\n\n  /**\n   * Attempts to parse the response body of the XHR. If parsing succeeds,\n   * the value returned will be deserialized based on the `responseType`\n   * set on the XHR.\n   *\n   * @return {*} The parsed response,\n   * or undefined if there was an empty response or parsing failed.\n   */\n  parseResponse: function () {\n    var xhr = this.xhr;\n    var responseType = xhr.responseType || xhr._responseType;\n    var preferResponseText = !this.xhr.responseType;\n    var prefixLen = xhr._jsonPrefix && xhr._jsonPrefix.length || 0;\n\n    try {\n      switch (responseType) {\n        case 'json':\n          // If the xhr object doesn't have a natural `xhr.responseType`,\n          // we can assume that the browser hasn't parsed the response for us,\n          // and so parsing is our responsibility. Likewise if response is\n          // undefined, as there's no way to encode undefined in JSON.\n          if (preferResponseText || xhr.response === undefined) {\n            // Try to emulate the JSON section of the response body section of\n            // the spec: https://xhr.spec.whatwg.org/#response-body\n            // That is to say, we try to parse as JSON, but if anything goes\n            // wrong return null.\n            try {\n              return JSON.parse(xhr.responseText);\n            } catch (_) {\n              console.warn('Failed to parse JSON sent from ' + xhr.responseURL);\n              return null;\n            }\n          }\n\n          return xhr.response;\n\n        case 'xml':\n          return xhr.responseXML;\n\n        case 'blob':\n        case 'document':\n        case 'arraybuffer':\n          return xhr.response;\n\n        case 'text':\n        default:\n          {\n            // If `prefixLen` is set, it implies the response should be parsed\n            // as JSON once the prefix of length `prefixLen` is stripped from\n            // it. Emulate the behavior above where null is returned on failure\n            // to parse.\n            if (prefixLen) {\n              try {\n                return JSON.parse(xhr.responseText.substring(prefixLen));\n              } catch (_) {\n                console.warn('Failed to parse JSON sent from ' + xhr.responseURL);\n                return null;\n              }\n            }\n\n            return xhr.responseText;\n          }\n      }\n    } catch (e) {\n      this.rejectCompletes(new Error('Could not parse response. ' + e.message));\n    }\n  },\n\n  /**\n   * Aborts the request.\n   */\n  abort: function () {\n    this._setAborted(true);\n\n    this.xhr.abort();\n  },\n\n  /**\n   * @param {*} body The given body of the request to try and encode.\n   * @param {?string} contentType The given content type, to infer an encoding\n   *     from.\n   * @return {*} Either the encoded body as a string, if successful,\n   *     or the unaltered body object if no encoding could be inferred.\n   */\n  _encodeBodyObject: function (body, contentType) {\n    if (typeof body == 'string') {\n      return body; // Already encoded.\n    }\n\n    var bodyObj =\n    /** @type {Object} */\n    body;\n\n    switch (contentType) {\n      case 'application/json':\n        return JSON.stringify(bodyObj);\n\n      case 'application/x-www-form-urlencoded':\n        return this._wwwFormUrlEncode(bodyObj);\n    }\n\n    return body;\n  },\n\n  /**\n   * @param {Object} object The object to encode as x-www-form-urlencoded.\n   * @return {string} .\n   */\n  _wwwFormUrlEncode: function (object) {\n    if (!object) {\n      return '';\n    }\n\n    var pieces = [];\n    Object.keys(object).forEach(function (key) {\n      // TODO(rictic): handle array values here, in a consistent way with\n      //   iron-ajax params.\n      pieces.push(this._wwwFormUrlEncodePiece(key) + '=' + this._wwwFormUrlEncodePiece(object[key]));\n    }, this);\n    return pieces.join('&');\n  },\n\n  /**\n   * @param {*} str A key or value to encode as x-www-form-urlencoded.\n   * @return {string} .\n   */\n  _wwwFormUrlEncodePiece: function (str) {\n    // Spec says to normalize newlines to \\r\\n and replace %20 spaces with +.\n    // jQuery does this as well, so this is likely to be widely compatible.\n    if (str === null || str === undefined || !str.toString) {\n      return '';\n    }\n\n    return encodeURIComponent(str.toString().replace(/\\r?\\n/g, '\\r\\n')).replace(/%20/g, '+');\n  },\n\n  /**\n   * Updates the status code and status text.\n   */\n  _updateStatus: function () {\n    this._setStatus(this.xhr.status);\n\n    this._setStatusText(this.xhr.statusText === undefined ? '' : this.xhr.statusText);\n  }\n});","/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport './iron-request.js';\nimport { Polymer } from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport { Base } from '@polymer/polymer/polymer-legacy.js';\n/**\nThe `iron-ajax` element exposes network request functionality.\n\n    <iron-ajax\n        auto\n        url=\"https://www.googleapis.com/youtube/v3/search\"\n        params='{\"part\":\"snippet\", \"q\":\"polymer\", \"key\": \"YOUTUBE_API_KEY\",\n\"type\": \"video\"}' handle-as=\"json\" on-response=\"handleResponse\"\n        debounce-duration=\"300\"></iron-ajax>\n\nWith `auto` set to `true`, the element performs a request whenever\nits `url`, `params` or `body` properties are changed. Automatically generated\nrequests will be debounced in the case that multiple attributes are changed\nsequentially.\n\nNote: The `params` attribute must be double quoted JSON.\n\nYou can trigger a request explicitly by calling `generateRequest` on the\nelement.\n\n@demo demo/index.html\n*/\n\nPolymer({\n  is: 'iron-ajax',\n\n  /** @override */\n  _template: null,\n\n  /**\n   * Fired before a request is sent.\n   *\n   * @event iron-ajax-presend\n   */\n\n  /**\n   * Fired when a request is sent.\n   *\n   * @event request\n   */\n\n  /**\n   * Fired when a request is sent.\n   *\n   * @event iron-ajax-request\n   */\n\n  /**\n   * Fired when a response is received.\n   *\n   * @event response\n   */\n\n  /**\n   * Fired when a response is received.\n   *\n   * @event iron-ajax-response\n   */\n\n  /**\n   * Fired when an error is received.\n   *\n   * @event error\n   */\n\n  /**\n   * Fired when an error is received.\n   *\n   * @event iron-ajax-error\n   */\n  hostAttributes: {\n    hidden: true\n  },\n  properties: {\n    /**\n     * The URL target of the request.\n     */\n    url: {\n      type: String\n    },\n\n    /**\n     * An object that contains query parameters to be appended to the\n     * specified `url` when generating a request. If you wish to set the body\n     * content when making a POST request, you should use the `body` property\n     * instead.\n     */\n    params: {\n      type: Object,\n      value: function () {\n        return {};\n      }\n    },\n\n    /**\n     * The HTTP method to use such as 'GET', 'POST', 'PUT', or 'DELETE'.\n     * Default is 'GET'.\n     */\n    method: {\n      type: String,\n      value: 'GET'\n    },\n\n    /**\n     * HTTP request headers to send.\n     *\n     * Example:\n     *\n     *     <iron-ajax\n     *         auto\n     *         url=\"http://somesite.com\"\n     *         headers='{\"X-Requested-With\": \"XMLHttpRequest\"}'\n     *         handle-as=\"json\"></iron-ajax>\n     *\n     * Note: setting a `Content-Type` header here will override the value\n     * specified by the `contentType` property of this element.\n     */\n    headers: {\n      type: Object,\n      value: function () {\n        return {};\n      }\n    },\n\n    /**\n     * Content type to use when sending data. If the `contentType` property\n     * is set and a `Content-Type` header is specified in the `headers`\n     * property, the `headers` property value will take precedence.\n     *\n     * Varies the handling of the `body` param.\n     */\n    contentType: {\n      type: String,\n      value: null\n    },\n\n    /**\n     * Body content to send with the request, typically used with \"POST\"\n     * requests.\n     *\n     * If body is a string it will be sent unmodified.\n     *\n     * If Content-Type is set to a value listed below, then\n     * the body will be encoded accordingly.\n     *\n     *    * `content-type=\"application/json\"`\n     *      * body is encoded like `{\"foo\":\"bar baz\",\"x\":1}`\n     *    * `content-type=\"application/x-www-form-urlencoded\"`\n     *      * body is encoded like `foo=bar+baz&x=1`\n     *\n     * Otherwise the body will be passed to the browser unmodified, and it\n     * will handle any encoding (e.g. for FormData, Blob, ArrayBuffer).\n     *\n     * @type\n     * (ArrayBuffer|ArrayBufferView|Blob|Document|FormData|null|string|undefined|Object)\n     */\n    body: {\n      type: Object,\n      value: null\n    },\n\n    /**\n     * Toggle whether XHR is synchronous or asynchronous. Don't change this\n     * to true unless You Know What You Are Doing™.\n     */\n    sync: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * Specifies what data to store in the `response` property, and\n     * to deliver as `event.detail.response` in `response` events.\n     *\n     * One of:\n     *\n     *    `text`: uses `XHR.responseText`.\n     *\n     *    `xml`: uses `XHR.responseXML`.\n     *\n     *    `json`: uses `XHR.responseText` parsed as JSON.\n     *\n     *    `arraybuffer`: uses `XHR.response`.\n     *\n     *    `blob`: uses `XHR.response`.\n     *\n     *    `document`: uses `XHR.response`.\n     */\n    handleAs: {\n      type: String,\n      value: 'json'\n    },\n\n    /**\n     * Set the withCredentials flag on the request.\n     */\n    withCredentials: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * Set the timeout flag on the request.\n     */\n    timeout: {\n      type: Number,\n      value: 0\n    },\n\n    /**\n     * If true, automatically performs an Ajax request when either `url` or\n     * `params` changes.\n     */\n    auto: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * If true, error messages will automatically be logged to the console.\n     */\n    verbose: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * The most recent request made by this iron-ajax element.\n     *\n     * @type {Object|undefined}\n     */\n    lastRequest: {\n      type: Object,\n      notify: true,\n      readOnly: true\n    },\n\n    /**\n     * The `progress` property of this element's `lastRequest`.\n     *\n     * @type {Object|undefined}\n     */\n    lastProgress: {\n      type: Object,\n      notify: true,\n      readOnly: true\n    },\n\n    /**\n     * True while lastRequest is in flight.\n     */\n    loading: {\n      type: Boolean,\n      notify: true,\n      readOnly: true\n    },\n\n    /**\n     * lastRequest's response.\n     *\n     * Note that lastResponse and lastError are set when lastRequest finishes,\n     * so if loading is true, then lastResponse and lastError will correspond\n     * to the result of the previous request.\n     *\n     * The type of the response is determined by the value of `handleAs` at\n     * the time that the request was generated.\n     *\n     * @type {Object}\n     */\n    lastResponse: {\n      type: Object,\n      notify: true,\n      readOnly: true\n    },\n\n    /**\n     * lastRequest's error, if any.\n     *\n     * @type {Object}\n     */\n    lastError: {\n      type: Object,\n      notify: true,\n      readOnly: true\n    },\n\n    /**\n     * An Array of all in-flight requests originating from this iron-ajax\n     * element.\n     */\n    activeRequests: {\n      type: Array,\n      notify: true,\n      readOnly: true,\n      value: function () {\n        return [];\n      }\n    },\n\n    /**\n     * Length of time in milliseconds to debounce multiple automatically\n     * generated requests.\n     */\n    debounceDuration: {\n      type: Number,\n      value: 0,\n      notify: true\n    },\n\n    /**\n     * Prefix to be stripped from a JSON response before parsing it.\n     *\n     * In order to prevent an attack using CSRF with Array responses\n     * (http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx/)\n     * many backends will mitigate this by prefixing all JSON response bodies\n     * with a string that would be nonsensical to a JavaScript parser.\n     *\n     */\n    jsonPrefix: {\n      type: String,\n      value: ''\n    },\n\n    /**\n     * By default, iron-ajax's events do not bubble. Setting this attribute will\n     * cause its request and response events as well as its iron-ajax-request,\n     * -response,  and -error events to bubble to the window object. The vanilla\n     * error event never bubbles when using shadow dom even if this.bubbles is\n     * true because a scoped flag is not passed with it (first link) and because\n     * the shadow dom spec did not used to allow certain events, including\n     * events named error, to leak outside of shadow trees (second link).\n     * https://www.w3.org/TR/shadow-dom/#scoped-flag\n     * https://www.w3.org/TR/2015/WD-shadow-dom-20151215/#events-that-are-not-leaked-into-ancestor-trees\n     */\n    bubbles: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * Changes the [`completes`](iron-request#property-completes) promise chain\n     * from `generateRequest` to reject with an object\n     * containing the original request, as well an error message.\n     * If false (default), the promise rejects with an error message only.\n     */\n    rejectWithRequest: {\n      type: Boolean,\n      value: false\n    },\n    _boundHandleResponse: {\n      type: Function,\n      value: function () {\n        return this._handleResponse.bind(this);\n      }\n    }\n  },\n  observers: ['_requestOptionsChanged(url, method, params.*, headers, contentType, ' + 'body, sync, handleAs, jsonPrefix, withCredentials, timeout, auto)'],\n\n  /** @override */\n  created: function () {\n    this._boundOnProgressChanged = this._onProgressChanged.bind(this);\n  },\n\n  /**\n   * The query string that should be appended to the `url`, serialized from\n   * the current value of `params`.\n   *\n   * @return {string}\n   */\n  get queryString() {\n    var queryParts = [];\n    var param;\n    var value;\n\n    for (param in this.params) {\n      value = this.params[param];\n      param = window.encodeURIComponent(param);\n\n      if (Array.isArray(value)) {\n        for (var i = 0; i < value.length; i++) {\n          queryParts.push(param + '=' + window.encodeURIComponent(value[i]));\n        }\n      } else if (value !== null) {\n        queryParts.push(param + '=' + window.encodeURIComponent(value));\n      } else {\n        queryParts.push(param);\n      }\n    }\n\n    return queryParts.join('&');\n  },\n\n  /**\n   * The `url` with query string (if `params` are specified), suitable for\n   * providing to an `iron-request` instance.\n   *\n   * @return {string}\n   */\n  get requestUrl() {\n    var queryString = this.queryString;\n    var url = this.url || '';\n\n    if (queryString) {\n      var bindingChar = url.indexOf('?') >= 0 ? '&' : '?';\n      return url + bindingChar + queryString;\n    }\n\n    return url;\n  },\n\n  /**\n   * An object that maps header names to header values, first applying the\n   * the value of `Content-Type` and then overlaying the headers specified\n   * in the `headers` property.\n   *\n   * @return {Object}\n   */\n  get requestHeaders() {\n    var headers = {};\n    var contentType = this.contentType;\n\n    if (contentType == null && typeof this.body === 'string') {\n      contentType = 'application/x-www-form-urlencoded';\n    }\n\n    if (contentType) {\n      headers['content-type'] = contentType;\n    }\n\n    var header;\n\n    if (typeof this.headers === 'object') {\n      for (header in this.headers) {\n        headers[header] = this.headers[header].toString();\n      }\n    }\n\n    return headers;\n  },\n\n  _onProgressChanged: function (event) {\n    this._setLastProgress(event.detail.value);\n  },\n\n  /**\n   * Request options suitable for generating an `iron-request` instance based\n   * on the current state of the `iron-ajax` instance's properties.\n   *\n   * @return {{\n   *   url: string,\n   *   method: (string|undefined),\n   *   async: (boolean|undefined),\n   *   body:\n   * (ArrayBuffer|ArrayBufferView|Blob|Document|FormData|null|string|undefined|Object),\n   *   headers: (Object|undefined),\n   *   handleAs: (string|undefined),\n   *   jsonPrefix: (string|undefined),\n   *   withCredentials: (boolean|undefined)}}\n   */\n  toRequestOptions: function () {\n    return {\n      url: this.requestUrl || '',\n      method: this.method,\n      headers: this.requestHeaders,\n      body: this.body,\n      async: !this.sync,\n      handleAs: this.handleAs,\n      jsonPrefix: this.jsonPrefix,\n      withCredentials: this.withCredentials,\n      timeout: this.timeout,\n      rejectWithRequest: this.rejectWithRequest\n    };\n  },\n\n  /**\n   * Performs an AJAX request to the specified URL.\n   *\n   * @return {!IronRequestElement}\n   */\n  generateRequest: function () {\n    var request =\n    /** @type {!IronRequestElement} */\n    document.createElement('iron-request');\n    var requestOptions = this.toRequestOptions();\n    this.push('activeRequests', request);\n    request.completes.then(this._boundHandleResponse).catch(this._handleError.bind(this, request)).then(this._discardRequest.bind(this, request));\n    var evt = this.fire('iron-ajax-presend', {\n      request: request,\n      options: requestOptions\n    }, {\n      bubbles: this.bubbles,\n      cancelable: true\n    });\n\n    if (evt.defaultPrevented) {\n      request.abort();\n      request.rejectCompletes(request);\n      return request;\n    }\n\n    if (this.lastRequest) {\n      this.lastRequest.removeEventListener('iron-request-progress-changed', this._boundOnProgressChanged);\n    }\n\n    request.addEventListener('iron-request-progress-changed', this._boundOnProgressChanged);\n    request.send(requestOptions);\n\n    this._setLastProgress(null);\n\n    this._setLastRequest(request);\n\n    this._setLoading(true);\n\n    this.fire('request', {\n      request: request,\n      options: requestOptions\n    }, {\n      bubbles: this.bubbles,\n      composed: true\n    });\n    this.fire('iron-ajax-request', {\n      request: request,\n      options: requestOptions\n    }, {\n      bubbles: this.bubbles,\n      composed: true\n    });\n    return request;\n  },\n  _handleResponse: function (request) {\n    if (request === this.lastRequest) {\n      this._setLastResponse(request.response);\n\n      this._setLastError(null);\n\n      this._setLoading(false);\n    }\n\n    this.fire('response', request, {\n      bubbles: this.bubbles,\n      composed: true\n    });\n    this.fire('iron-ajax-response', request, {\n      bubbles: this.bubbles,\n      composed: true\n    });\n  },\n  _handleError: function (request, error) {\n    if (this.verbose) {\n      Base._error(error);\n    }\n\n    if (request === this.lastRequest) {\n      this._setLastError({\n        request: request,\n        error: error,\n        status: request.xhr.status,\n        statusText: request.xhr.statusText,\n        response: request.xhr.response\n      });\n\n      this._setLastResponse(null);\n\n      this._setLoading(false);\n    } // Tests fail if this goes after the normal this.fire('error', ...)\n\n\n    this.fire('iron-ajax-error', {\n      request: request,\n      error: error\n    }, {\n      bubbles: this.bubbles,\n      composed: true\n    });\n    this.fire('error', {\n      request: request,\n      error: error\n    }, {\n      bubbles: this.bubbles,\n      composed: true\n    });\n  },\n  _discardRequest: function (request) {\n    var requestIndex = this.activeRequests.indexOf(request);\n\n    if (requestIndex > -1) {\n      this.splice('activeRequests', requestIndex, 1);\n    }\n  },\n  _requestOptionsChanged: function () {\n    this.debounce('generate-request', function () {\n      if (this.url == null) {\n        return;\n      }\n\n      if (this.auto) {\n        this.generateRequest();\n      }\n    }, this.debounceDuration);\n  }\n});"],"names":[],"mappings":"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"}